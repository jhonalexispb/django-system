class ThemeLayout{constructor(){this.html=document.getElementsByTagName("html")[0],this.config=window.config}initVerticalMenu(){const e=document.querySelectorAll(".navbar-nav li .collapse");if(document.querySelectorAll(".navbar-nav li [data-bs-toggle='collapse']").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault()}))})),e.forEach((e=>{e.addEventListener("show.bs.collapse",(function(e){const t=e.target.closest(".collapse.show");document.querySelectorAll(".navbar-nav .collapse.show").forEach((n=>{if(n!==e.target&&n!==t){new bootstrap.Collapse(n).hide()}}))}))})),document.querySelector(".navbar-nav")){function t(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}document.querySelectorAll(".navbar-nav a").forEach((function(e){var t=window.location.href.split(/[?#]/)[0];if(e.href===t){e.classList.add("active"),e.parentNode.classList.add("active");let t=e.closest(".collapse");for(;t;)t.classList.add("show"),t.parentElement.children[0].classList.add("active"),t.parentElement.children[0].setAttribute("aria-expanded","true"),t=t.parentElement.closest(".collapse")}})),setTimeout((function(){var e,n,o,i,a,c,r,s=document.querySelector("li a.active");if(null!=s){var l=document.querySelector(".main-nav .simplebar-content-wrapper"),u=s.offsetTop-300;l&&u>100&&(n=u,o=600,i=(e=l).scrollTop,a=n-i,c=0,(r=function(){var n=t(c+=20,i,a,o);e.scrollTop=n,c<o&&setTimeout(r,20)})())}}),200)}}initConfig(){this.config=JSON.parse(JSON.stringify(window.config)),this.setSwitchFromConfig()}changeMenuColor(e){this.config.menu.color=e,this.html.setAttribute("data-menu-color",e),this.setSwitchFromConfig()}changeMenuSize(e,t=!0){this.html.setAttribute("data-menu-size",e),t&&(this.config.menu.size=e,this.setSwitchFromConfig())}changeThemeMode(e){this.config.theme=e,this.html.setAttribute("data-bs-theme",e),this.setSwitchFromConfig()}changeTopbarColor(e){this.config.topbar.color=e,this.html.setAttribute("data-topbar-color",e),this.setSwitchFromConfig()}resetTheme(){this.config=JSON.parse(JSON.stringify(window.defaultConfig)),this.changeMenuColor(this.config.menu.color),this.changeMenuSize(this.config.menu.size),this.changeThemeMode(this.config.theme),this.changeTopbarColor(this.config.topbar.color)}initSwitchListener(){var e=this;document.querySelectorAll("input[name=data-menu-color]").forEach((function(t){t.addEventListener("change",(function(n){e.changeMenuColor(t.value)}))})),document.querySelectorAll("input[name=data-menu-size]").forEach((function(t){t.addEventListener("change",(function(n){e.changeMenuSize(t.value)}))})),document.querySelectorAll("input[name=data-bs-theme]").forEach((function(t){t.addEventListener("change",(function(n){e.changeThemeMode(t.value)}))})),document.querySelectorAll("input[name=data-topbar-color]").forEach((function(t){t.addEventListener("change",(function(n){e.changeTopbarColor(t.value)}))}));var t=document.getElementById("light-dark-mode");t&&t.addEventListener("click",(function(t){"light"===e.config.theme?e.changeThemeMode("dark"):e.changeThemeMode("light")}));var n=document.querySelector("#reset-layout");n&&n.addEventListener("click",(function(t){e.resetTheme()}));var o=document.querySelector(".button-toggle-menu");o&&o.addEventListener("click",(function(){var t=e.config.menu.size,n=e.html.getAttribute("data-menu-size",t);"hidden"!==n?"condensed"===n?e.changeMenuSize("condensed"==t?"default":t,!1):e.changeMenuSize("condensed",!1):e.showBackdrop(),e.html.classList.toggle("sidebar-enable")})),document.querySelectorAll(".button-sm-hover").forEach((function(t){t.addEventListener("click",(function(){var t=e.config.menu.size,n=e.html.getAttribute("data-menu-size",t);"sm-hover-active"===t&&("sm-hover-active"===n?e.changeMenuSize("sm-hover",!0):e.changeMenuSize("sm-hover-active",!0)),"sm-hover"===t&&("sm-hover"===n?e.changeMenuSize("sm-hover-active",!0):e.changeMenuSize("sm-hover",!0))}))}))}showBackdrop(){const e=document.createElement("div");e.classList="offcanvas-backdrop fade show",document.body.appendChild(e),document.body.style.overflow="hidden",window.innerWidth>1040&&(document.body.style.paddingRight="15px");const t=this;e.addEventListener("click",(function(n){t.html.classList.remove("sidebar-enable"),document.body.removeChild(e),document.body.style.overflow=null,document.body.style.paddingRight=null}))}initWindowSize(){var e=this;window.addEventListener("resize",(function(t){e._adjustLayout()}))}_adjustLayout(){var e=this;window.innerWidth<=1140?e.changeMenuSize("hidden",!1):e.changeMenuSize(e.config.menu.size)}setSwitchFromConfig(){sessionStorage.setItem("__LARKON_CONFIG__",JSON.stringify(this.config)),document.querySelectorAll(".settings-bar input[type=radio]").forEach((function(e){e.checked=!1}));var e=this.config;if(e){var t=document.querySelector("input[type=radio][name=data-bs-theme][value="+e.theme+"]"),n=document.querySelector("input[type=radio][name=data-topbar-color][value="+e.topbar.color+"]"),o=document.querySelector("input[type=radio][name=data-menu-size][value="+e.menu.size+"]"),i=document.querySelector("input[type=radio][name=data-menu-color][value="+e.menu.color+"]");t&&(t.checked=!0),n&&(n.checked=!0),o&&(o.checked=!0),i&&(i.checked=!0)}}init(){this.initVerticalMenu(),this.initConfig(),this.initSwitchListener(),this.initWindowSize(),this._adjustLayout(),this.setSwitchFromConfig()}}(new ThemeLayout).init();